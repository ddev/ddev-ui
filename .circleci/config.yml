version: 2
stages:
  build:
    machine:
      image: circleci/classic:201708-01

#    environment:
#      GOPATH: /home/circleci/go
    working_directory: ~/ddev-ui

    steps:

      - run:
          name: Update npm
          command: |
            # the sudo -E bash - here seems to fail with a 130 even though it apparently succeeded.
            curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash - || true
            sudo apt-get -qq install -y build-essential nodejs wine wine-mono

      - checkout

      - run: make linux

